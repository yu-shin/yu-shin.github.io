<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">

<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic%7CRoboto+Slab:300,300italic,400,400italic,700,700italic%7CNoto+Serif+SC:300,300italic,400,400italic,700,700italic%7CAmita:300,300italic,400,400italic,700,700italic%7CMontserrat:300,300italic,400,400italic,700,700italic%7CPT+Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.1/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yu-shin.github.io","root":"/","images":"/images","scheme":"Gemini","version":"8.2.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"width":240},"copycode":true,"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜尋...","empty":"我們無法找到任何有關 ${query} 的搜索結果","hits_time":"${hits} 找到 ${time} 個結果","hits":"找到 ${hits} 個結果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}};
  </script>
<meta name="description" content="前言 m-way Search Tree 雖利用增大 Tree 的 Degree 來降低 Search Tree 的高度，以減少 Disk I&#x2F;O 的次數，但若此 Tree 不平衡，也可能會變相地增加 Disk I&#x2F;O 的次數  因此發展出 B-tree of order m  定義 是一個 Balanced m-way search tree。可以為空，若不為空，則滿足：  Root 至少有 2">
<meta property="og:type" content="article">
<meta property="og:title" content="B-Tree">
<meta property="og:url" content="https://yu-shin.github.io/posts/fc4bcf8f/index.html">
<meta property="og:site_name" content="Nicholas Blogger">
<meta property="og:description" content="前言 m-way Search Tree 雖利用增大 Tree 的 Degree 來降低 Search Tree 的高度，以減少 Disk I&#x2F;O 的次數，但若此 Tree 不平衡，也可能會變相地增加 Disk I&#x2F;O 的次數  因此發展出 B-tree of order m  定義 是一個 Balanced m-way search tree。可以為空，若不為空，則滿足：  Root 至少有 2">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b1.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b2.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b3.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b4.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b5.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b6.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b7.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b8.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b9.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b10.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b11.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b12.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b13.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b14.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b15.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b16.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b17.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b18.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b19.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b20.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b21.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b22.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b23.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b24.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b25.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b26.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b27.jpg">
<meta property="og:image" content="https://yu-shin.github.io/posts/fc4bcf8f/bb1.jpg">
<meta property="article:published_time" content="2021-01-31T09:55:36.000Z">
<meta property="article:modified_time" content="2021-01-31T15:38:02.412Z">
<meta property="article:author" content="Nicholas Tsai">
<meta property="article:tag" content="資料結構">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://yu-shin.github.io/posts/fc4bcf8f/b1.jpg">


<link rel="canonical" href="https://yu-shin.github.io/posts/fc4bcf8f/">


<script data-pjax class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-TW'
  };
</script>
<title>B-Tree | Nicholas Blogger</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Q5LBLBPSS8"></script>
    <script data-pjax>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-Q5LBLBPSS8');
      }
    </script>




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Nicholas Blogger</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首頁</a></li>
        
            
  <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分類<span class="badge">0</span></a></li>


      
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜尋
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜尋..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%9A%E7%BE%A9"><span class="nav-number">2.</span> <span class="nav-text">定義</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AF%84%E4%BE%8B"><span class="nav-number">3.</span> <span class="nav-text">範例</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%9A%E7%90%86"><span class="nav-number">4.</span> <span class="nav-text">定理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#insert"><span class="nav-number">5.</span> <span class="nav-text">Insert</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#split"><span class="nav-number">5.1.</span> <span class="nav-text">Split</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AF%84%E4%BE%8B-1"><span class="nav-number">5.2.</span> <span class="nav-text">範例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#delete"><span class="nav-number">6.</span> <span class="nav-text">Delete</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#case-1-x-%E4%BD%8D%E6%96%BC-leaf-node"><span class="nav-number">6.1.</span> <span class="nav-text">Case 1: x 位於 Leaf Node</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#rotation"><span class="nav-number">6.1.1.</span> <span class="nav-text">Rotation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#combination"><span class="nav-number">6.1.2.</span> <span class="nav-text">Combination</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AF%84%E4%BE%8B-2"><span class="nav-number">6.1.3.</span> <span class="nav-text">範例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#case-2-x-%E4%BD%8D%E6%96%BC-non-leaf-node"><span class="nav-number">6.2.</span> <span class="nav-text">Case 2: x 位於 Non-leaf Node</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AF%84%E4%BE%8B-3"><span class="nav-number">6.2.1.</span> <span class="nav-text">範例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#b-tree"><span class="nav-number">7.</span> <span class="nav-text">B+ Tree</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9A%E7%BE%A9-1"><span class="nav-number">7.1.</span> <span class="nav-text">定義</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#layer"><span class="nav-number">7.2.</span> <span class="nav-text">Layer</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#index-sequential-access"><span class="nav-number">7.3.</span> <span class="nav-text">Index Sequential Access</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%83%E8%80%83%E8%B3%87%E6%96%99"><span class="nav-number">8.</span> <span class="nav-text">參考資料</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <a href="/">
    <img class="site-author-image" itemprop="image" alt="Nicholas Tsai"
      src="/images/bighead.jpg">
  <p class="site-author-name" itemprop="name">Nicholas Tsai</p>
  <div class="site-description" itemprop="description">辛苦是值得的</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">26</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">標籤</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/yu-shin" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;yu-shin" rel="noopener external nofollow noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:g06410092@gmail.com" title="E-Mail → mailto:g06410092@gmail.com" rel="noopener external nofollow noreferrer" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/nichola69108664" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;nichola69108664" rel="noopener external nofollow noreferrer" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>




        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/yu-shin" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener external nofollow noreferrer" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="https://yu-shin.github.io/posts/fc4bcf8f/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/bighead.jpg">
      <meta itemprop="name" content="Nicholas Tsai">
      <meta itemprop="description" content="辛苦是值得的">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nicholas Blogger">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          B-Tree
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2021-01-31 17:55:36" itemprop="dateCreated datePublished" datetime="2021-01-31T17:55:36+08:00">2021-01-31</time>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/posts/fc4bcf8f/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="posts/fc4bcf8f/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="文章字數">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">文章字數：</span>
      <span>2.8k</span>
    </span>
    <span class="post-meta-item" title="所需閱讀時間">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">所需閱讀時間 &asymp;</span>
      <span>5 分鐘</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="前言">前言</h1>
<p><strong>m-way Search Tree</strong> 雖利用<strong>增大</strong> Tree 的 Degree 來降低 Search Tree 的高度，以<strong>減少 Disk I/O 的次數</strong>，但<code>若此 Tree 不平衡</code>，也可能會變相地<strong>增加 Disk I/O 的次數</strong></p>
<ul>
<li><strong>因此發展出 <code>B-tree</code> of order m</strong></li>
</ul>
<h1 id="定義">定義</h1>
<p><strong>是一個 Balanced m-way search tree。可以為空，若不為空，則滿足：</strong></p>
<ul>
<li><strong>Root 至少有 2 個 Childs ( <code>Root: 2 ≤ degree ≤ m</code>)</strong></li>
<li><strong>除了 Root 及 Failure Node 之外，其餘 Node 的分支度介於 ⎡m/2⎤ 及 m 之間 (<code>⎡m/2⎤  ≤ degree ≤ m</code>)</strong></li>
<li><strong>所有的 Failure Node 皆位於同一 Level。(即：所有葉子節點位於同一 Level)</strong> <a id="more"></a></li>
</ul>
<h1 id="範例">範例</h1>
<p><strong>有一 B-tree of order m 如下：</strong> <img src="/posts/fc4bcf8f/b1.jpg" class=""></p>
<ul>
<li>若 m = 3 (即：B-tree of order 3)
<ul>
<li><strong>Root</strong>：2 ≤ degree ≤ 3</li>
<li><strong>非 Root 與非外部的節點</strong>： ⎡m/2⎤ ≤ degree ≤ m ⇒ 2 ≤ degree ≤ 3</li>
<li>B-tree of order 3 又稱 <code>2-3 tree</code></li>
</ul></li>
<li>若 m = 4 (即：B-tree of order 4)
<ul>
<li><strong>Root</strong>：2 ≤ degree ≤ 4</li>
<li><strong>非 Root 與非外部的節點</strong>： ⎡m/2⎤ ≤ degree ≤ m ⇒ 2 ≤ degree ≤ 4</li>
<li>B-tree of order 4 又稱 <code>2-3-4 tree</code></li>
</ul></li>
<li>若 m = 5 (即：B-tree of order 5)
<ul>
<li><strong>Root</strong>：2 ≤ degree ≤ 5</li>
<li><strong>非 Root 與非外部的節點</strong>： ⎡m/2⎤ ≤ degree ≤ m ⇒ 3 ≤ degree ≤ 5</li>
</ul></li>
</ul>
<h1 id="定理">定理</h1>
<p>高度為 h 的 B-Tree：</p>
<ul>
<li>最多的 Node 個數 = ?</li>
<li>最多的 Key (Data) 個數 = ? <div class="note danger"><p>由於 B-Tree 中，毎一個節點的 Degree 最大皆可到 m ( m 可自定 )所以其結果等同於 m-way Search Tree 的分析結果</p>
</div></li>
</ul>
<h1 id="insert">Insert</h1>
<p><strong>Step:</strong></p>
<ol type="1">
<li>先做 Search，以找到適當的插入節點，將 x 放入該節點中</li>
<li>檢査該節點有無 Overflow
<ul>
<li>無 Overflow ( key 數 ≤ m-1 )，則 OK 並跳出</li>
<li>有 Overflow (key 數 ≥ m)則：
<ul>
<li>作 “Split” 處理</li>
<li>針對父點，goto 2 ( 即：作完 Split 後，針對父點檢査是否有 Overflow )</li>
</ul></li>
</ul></li>
</ol>
<div class="note success"><h2 id="split">Split</h2>
<p>將第 ⎡m/2⎤ 個鍵値上拉到父點，其餘鍵値分成左、右兩個子點 <img src="/posts/fc4bcf8f/b2.jpg" class=""></p>
</div>
<h2 id="範例-1">範例</h2>
<ol type="1">
<li><strong>有一 B-tree of order 3 如下，若連續 Insert “2”， “130”， “8” 會得到什麼結果?</strong> <img src="/posts/fc4bcf8f/b3.jpg" class=""></li>
</ol>
<p><strong>Ans:</strong></p>
<ul>
<li><strong>Insert “2”</strong>
<ul>
<li><strong>無 Overflow，∴ OK.</strong> <img src="/posts/fc4bcf8f/b4.jpg" class=""></li>
</ul></li>
<li><strong>Insert “130”</strong>
<ul>
<li><strong>有 Overflow</strong> <img src="/posts/fc4bcf8f/b5.jpg" class=""></li>
</ul></li>
<li><strong>Insert “8”</strong>
<ul>
<li><strong>有 Overflow</strong> <img src="/posts/fc4bcf8f/b6.jpg" class=""> <img src="/posts/fc4bcf8f/b7.jpg" class=""> <img src="/posts/fc4bcf8f/b8.jpg" class=""></li>
</ul></li>
</ul>
<ol start="2" type="1">
<li><strong>給予 1, 2, 3, 4, 5, 6, 7, 8，請建立 2-3 tree (B-tree of order 3)</strong></li>
</ol>
<p><strong>Ans:</strong> <img src="/posts/fc4bcf8f/b9.jpg" class=""></p>
<h1 id="delete">Delete</h1>
<p>Step:</p>
<ol type="1">
<li>先做 Search，以找到 x 所在之節點</li>
<li>分成下列兩個 Case 來處理:
<ul>
<li>Case 1: x 位於 Leaf Node</li>
<li>Case 2: x 位於 Non-leaf Node</li>
</ul></li>
</ol>
<h2 id="case-1-x-位於-leaf-node">Case 1: x 位於 Leaf Node</h2>
<p><strong>Step:</strong></p>
<ol type="1">
<li>Delete x</li>
<li>檢査該 Node 有無 Underflow
<ul>
<li>沒有 Underflow (即：鍵値數目 ≥ ⎡m/2⎤ -1) 則 OK，結束工作</li>
<li>有 Underflow (即：鍵値數目 &lt; ⎡m/2⎤ -1)，則：
<ul>
<li>先嘗試作 “<code>Rotation</code>”，若完成工作則結束</li>
<li>若無法做 “Rotation”，則作 “<code>Combination</code>”。Combination 做完，針對父點，goto 2</li>
</ul></li>
</ul></li>
</ol>
<div class="note danger"><p>B-tree of order m 中，<strong>除了樹根與失敗節點之外</strong>，<code>其它的 Internal Node 的 degree 是介於 ⎡m/2⎤ ~ m 之間</code>，∴ 毎個 Internal Node 內的鍵值<code>最多有 m- 1 個鍵値</code>，<code>最少有 ⎡m/2⎤ - 1 個鍵値</code></p>
</div>
<h3 id="rotation">Rotation</h3>
<p>Rotation 的處理，可分成：</p>
<ul>
<li><strong>右旋：</strong>
<ol type="1">
<li>將右兄弟的最小鍵値傳至父點</li>
<li>將原父點的最大鍵値傳給 Underflow 的節點做為其最大鍵値</li>
</ol></li>
<li><strong>左旋：</strong>
<ol type="1">
<li>將左兄弟的最大鍵値傳至父點</li>
<li>將原父點的最小鍵値傳給 Underflow 的節點做為其最小鍵値</li>
</ol></li>
<li>這些 Rotation 的結果可保有 Binary Search Tree 的鍵値順序，即：左子樹(小) - 樹根(中) - 右子樹(大)</li>
</ul>
<img src="/posts/fc4bcf8f/b10.jpg" class="">
<h3 id="combination">Combination</h3>
<p>Combination 的處理，可分成：</p>
<ul>
<li><strong>右合併：</strong>
<ol type="1">
<li>將父點右邊的最大鍵値傳給 Underflow 的節點做為其最大鍵値</li>
<li>將 Underflow 的節點與其<code>有相同鍵値來源之兄弟</code>合併成一個節點</li>
</ol></li>
<li><strong>左合併：</strong>
<ol type="1">
<li>將父點左邊的最小鍵値傳給 Underflow 的節點做為其最小鍵値</li>
<li>將 Underflow 的節點與其<code>有相同鍵値來源之兄弟</code>合併成一個節點</li>
</ol></li>
<li>這些 Combination 的結果可保有 Binary Search Tree 的鍵値順序，即：左子樹(小) - 樹根(中) - 右子樹(大)</li>
</ul>
<img src="/posts/fc4bcf8f/b11.jpg" class="">
<h3 id="範例-2">範例</h3>
<ol type="1">
<li><strong>有一 B-tree of order 3 如下，若連續 Delete “5”， “65”， “50” 會得到什麼結果?</strong> <img src="/posts/fc4bcf8f/b12.jpg" class=""></li>
</ol>
<p><strong>Ans:</strong></p>
<ul>
<li><p>2 ≤ degree ≤ 3 ⇒ <code>1 ≤ 鍵値數量 ≤ 2</code></p></li>
<li><strong>Delete “5”</strong>
<ul>
<li><strong>無 Underflow，∴ OK</strong> <img src="/posts/fc4bcf8f/b13.jpg" class=""></li>
</ul></li>
<li><strong>Delete “65”</strong>
<ul>
<li><strong>有 Underflow</strong> <img src="/posts/fc4bcf8f/b14.jpg" class=""></li>
</ul></li>
<li><strong>Delete “50”</strong>
<ul>
<li><strong>有 Underflow</strong> <img src="/posts/fc4bcf8f/b15.jpg" class=""></li>
</ul></li>
</ul>
<ol start="2" type="1">
<li><strong>有一 B-tree of order 3 如下，若連續 Delete “80”， “10” 會得到什麼結果?</strong> <img src="/posts/fc4bcf8f/b16.jpg" class=""> <strong>Ans:</strong></li>
</ol>
<ul>
<li><p>2 ≤ degree ≤ 3 ⇒ <code>1 ≤ 鍵値數量 ≤ 2</code></p></li>
<li><strong>Delete “80”</strong>
<ul>
<li><strong>有 Underflow</strong> <img src="/posts/fc4bcf8f/b17.jpg" class=""></li>
</ul></li>
<li><strong>父點有 Underflow</strong> <img src="/posts/fc4bcf8f/b18.jpg" class=""></li>
<li><strong>Delete “10”</strong>
<ul>
<li><strong>有 Underflow</strong> <img src="/posts/fc4bcf8f/b19.jpg" class=""></li>
</ul></li>
<li><strong>父點有 Underflow</strong> <img src="/posts/fc4bcf8f/b20.jpg" class=""></li>
<li><p><strong>父點又有 Underflow</strong> <img src="/posts/fc4bcf8f/b21.jpg" class=""></p></li>
</ul>
<h2 id="case-2-x-位於-non-leaf-node">Case 2: x 位於 Non-leaf Node</h2>
<p><strong>Step:</strong></p>
<ol type="1">
<li><ol type="1">
<li>以 <code>x 的右子樹中之最小鍵値</code>取代 x ；或是</li>
<li>以 <code>x 的左子樹中之最大鍵値</code>取代 x</li>
</ol></li>
<li>返回 Case 1 作後續處理</li>
</ol>
<h3 id="範例-3">範例</h3>
<p><strong>有一 B-tree of order 3 如下，若連續 Delete “60”， “100” 會得到什麼結果?</strong> <img src="/posts/fc4bcf8f/b22.jpg" class=""></p>
<p><strong>Ans:</strong></p>
<ul>
<li><p>2 ≤ degree ≤ 3 ⇒ <code>1 ≤ 鍵値數量 ≤ 2</code></p></li>
<li><strong>Delete “60”</strong>
<ul>
<li>要選擇<code>右子樹最小</code> or <code>左子樹最大</code>的鍵値來取代被刪除的資料，以最方便的為優先</li>
<li>Rotation &gt; Combination</li>
</ul></li>
<li>返回 Case 1 做後續處理 <img src="/posts/fc4bcf8f/b23.jpg" class=""> <img src="/posts/fc4bcf8f/b24.jpg" class=""> <img src="/posts/fc4bcf8f/b25.jpg" class=""></li>
<li><strong>Delete “100”</strong>
<ul>
<li>要選擇右子樹最小 or 左子樹最大的鍵値來取代被刪除的資料，以最方便的為優先</li>
<li>Rotation &gt; Combination <img src="/posts/fc4bcf8f/b26.jpg" class=""></li>
</ul></li>
<li><p>返回 Case 1 做後續處理 <img src="/posts/fc4bcf8f/b27.jpg" class=""></p></li>
</ul>
<h1 id="b-tree">B+ Tree</h1>
<h2 id="定義-1">定義</h2>
<ul>
<li><code>是 B Tree 之變形</code>，也是用於 External Search / Sort 上</li>
<li>可以支援 <strong>ISAM</strong> (Index Sequential Access Method)之實施，常用於 <strong>DBMS</strong> 內層製作</li>
</ul>
<img src="/posts/fc4bcf8f/bb1.jpg" class="">
<h2 id="layer">Layer</h2>
<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0" xmlns="http://www.w3.org/2000/svg" width="3.075ex" height="1.754ex" role="img" focusable="false" viewBox="0 -775.2 1359.1 775.2" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-3-TEX-I-1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path><path id="MJX-3-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><use xlink:href="#MJX-3-TEX-I-1D435"></use></g><g data-mml-node="mo" transform="translate(759, 363) scale(0.707)"><use xlink:href="#MJX-3-TEX-N-2B"></use></g></g></g></g></svg></mjx-container>
<p>tree 分為兩個 <strong>Layer</strong>:</p>
<ul>
<li><code>Index Layer:</code>
<ul>
<li>採 B tree 結構。僅用來存放<code>索引</code>，以幫助 User 正確地找到所需之 Data Block</li>
</ul></li>
<li><code>Data Blocks Layer:</code>
<ul>
<li>用以存放 <code>Data</code> ，且 Blocks 之間以 <code>Link List</code> 串連</li>
<li>Data Block 存放資料時，通常<code>不會受到 B tree 的 Order 限制</code>。因此，每個 Data Block 最多要塞多少筆 Data 可自訂。當然也可以和 Index Layer 內的節點一致</li>
</ul></li>
</ul>
<h2 id="index-sequential-access">Index Sequential Access</h2>
<ul>
<li>透過 Index 找到對應的起始 Data Block 之後，即可循序讀取其它資料</li>
<li>Ex: 找出<code>大於等於 7 ~ 小於 20</code> 的資料</li>
</ul>
<h1 id="參考資料">參考資料</h1>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="http://debussy.im.nuu.edu.tw/sjchen/Datastructure/98/course08.pdf">國立聯合大學陳士杰資料結構</a></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div></div>
  <button onclick="document.querySelector('.post-reward').classList.toggle('active');">
    捐贈
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/ETH.jpg" alt="Nicholas Tsai ETH">
        <span>ETH</span>
      </div>

  </div>
</div>

          <div class="followme">
  <span>歡迎關注我的其它發布渠道</span>

  <div class="social-list">

      <div class="social-item">
        <a target="_blank" class="social-link" href="https://twitter.com/nichola69108664" rel="external nofollow noreferrer">
          <span class="icon">
            <i class="fab fa-twitter"></i>
          </span>

          <span class="label">Twitter</span>
        </a>
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/%E8%B3%87%E6%96%99%E7%B5%90%E6%A7%8B/" rel="tag"># 資料結構</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/posts/eb32b5ac/" rel="prev" title="M-way Search Tree">
                  <i class="fa fa-chevron-left"></i> M-way Search Tree
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>






    
  <div class="comments" id="disqus_thread">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2020 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fab fa-angellist"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Nicholas Tsai</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="總字數">81k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="所需總閱讀時間">2:27</span>
  </span>
</div>

    </div>
  </footer>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/@next-theme/pjax@0.4.0/pjax.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '.page-configurations',
    '.main-inner',
    '.post-toc-wrap',
    '.languages',
    '.pjax'
  ],
  analytics: false,
  cacheBust: false,
  scrollRestoration: false,
  scrollTo: !CONFIG.bookmark.enable
});

document.addEventListener('pjax:success', () => {
  pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  const hasTOC = document.querySelector('.post-toc');
  document.querySelector('.sidebar-inner').classList.toggle('sidebar-nav-active', hasTOC);
  document.querySelector(hasTOC ? '.sidebar-nav-toc' : '.sidebar-nav-overview').click();
  NexT.utils.updateSidebarPosition();
});
</script>


  
<script src="/js/local-search.js"></script>






  



    <div class="pjax">

  


<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://nicholas-tsai.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "https://yu-shin.github.io/posts/fc4bcf8f/";
    this.page.identifier = "posts/fc4bcf8f/";
    this.page.title = "B-Tree";
    };
  NexT.utils.loadComments('#disqus_thread', () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://nicholas-tsai.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

    </div>

<link rel="stylesheet" href="/dist/APlayer.min.css">
<div id="aplayer"></div>
<script src="./node_modules/pjax/pjax.js"></script>
<script type="text/javascript" src="/dist/APlayer.min.js"></script>
<script type="text/javascript" src="/dist/music.js"></script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"superSample":2,"width":150,"height":300,"position":"right","hOffset":0,"vOffset":-20},"mobile":{"show":true,"scale":0.7},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"log":false});</script></body>
</html>
